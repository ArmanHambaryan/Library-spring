<!DOCTYPE html>
<html lang="en" , xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Book Page</title>

</head>
<body>
<a href="/">Home</a><br>
<a href="/books/add" class="add-btn">+ Add New Book</a><br>
<form action="/book" method="get" style="margin-bottom: 20px;">
    <select name="categoryId" onchange="this.form.submit()">
        <option value="0">All Categories</option>
        <option th:each="cat : ${categories}"
                th:value="${cat.id}"
                th:text="${cat.name}"
                th:selected="${param.categoryId != null && #strings.equals(param.categoryId, #strings.toString(cat.id))}">
        </option>
    </select>

    <input type="text" name="keyword" th:value="${param.keyword}" placeholder="Search by title or author...">
    <button type="submit">Search</button>
    <a href="/book"><button type="button">Reset</button></a>
</form>

<table>
    <tr>
        <th>ID</th>
        <th>Title</th>
        <th>Author</th>
        <th>Year</th>
        <th>Genre</th>
        <th>Category</th>
        <th>Action</th>
    </tr>
    <tr th:each="books : ${books}">

        <td th:text="${books.id}"></td>
        <td th:text="${books.title}"></td>
        <td th:text="${books.author}"></td>
        <td th:text="${books.year}"></td>
        <td th:text="${books.genre}"></td>
        <td th:text="${books.category.getName()}"></td>
        <td><a th:href="@{/books/delete(id=${books.id})}">Delete</a></td>
    </tr>
</table>


</body>
</html>