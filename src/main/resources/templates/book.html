<!DOCTYPE html>
<html lang="en" , xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Book Page</title>
    <head>
        <meta charset="UTF-8">
        <title>Book Page</title>
        <style>
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                background-color: #f8f9fa;
                padding: 40px;
                color: #333;
            }

            a {
                text-decoration: none;
                color: #007bff;
                font-weight: 500;
            }

            .add-btn {
                display: inline-block;
                background-color: #28a745;
                color: white;
                padding: 10px 20px;
                border-radius: 5px;
                margin: 15px 0;
                transition: 0.3s;
            }

            .add-btn:hover {
                background-color: #218838;
            }

            form {
                background: white;
                padding: 20px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
                display: flex;
                gap: 10px;
                align-items: center;
            }

            input[type="text"], select {
                padding: 8px 12px;
                border: 1px solid #ddd;
                border-radius: 4px;
            }

            button {
                padding: 8px 15px;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                background-color: #007bff;
                color: white;
                transition: 0.2s;
            }

            button[type="button"] {
                background-color: #6c757d;
            }

            button:hover {
                opacity: 0.9;
            }

            table {
                width: 100%;
                border-collapse: collapse;
                background: white;
                border-radius: 10px;
                overflow: hidden;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
                margin-top: 20px;
            }

            th, td {
                padding: 15px;
                text-align: left;
                border-bottom: 1px solid #eee;
            }

            th {
                background-color: #f1f3f5;
                color: #495057;
                text-transform: uppercase;
                font-size: 13px;
                letter-spacing: 1px;
            }

            tr:hover {
                background-color: #f8f9ff;
            }

            tr:nth-child(even) {
                background-color: #fafafa;
            }

            td a[th\:href*="delete"] {
                color: #dc3545;
                font-weight: bold;
            }

            td a[th\:href*="delete"]:hover {
                color: #a71d2a;
            }
        </style>
    </head>
    <body>

    <a href="/">Home</a><br>
    <a href="/books/add" class="add-btn">+ Add New Book</a>

    <form action="/book" method="get">
        <select name="categoryId" onchange="this.form.submit()">
            <option value="0">All Categories</option>
            <option th:each="cat : ${categories}"
                    th:value="${cat.id}"
                    th:text="${cat.name}"
                    th:selected="${param.categoryId != null && #strings.equals(param.categoryId, #strings.toString(cat.id))}">
            </option>
        </select>

        <input type="text" name="keyword" th:value="${param.keyword}" placeholder="Search by title or author...">
        <button type="submit">Search</button>
        <a href="/book">
            <button type="button">Reset</button>
        </a>
    </form>

    <table>
        <thead>
        <tr>
            <th>ID</th>
            <th>Title</th>
            <th>Author</th>
            <th>Year</th>
            <th>Genre</th>
            <th>Category</th>
            <th>Action</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="books : ${books}">
            <td th:text="${books.id}"></td>
            <td th:text="${books.title}" style="font-weight: 600;"></td>
            <td th:text="${books.author}"></td>
            <td th:text="${books.year}"></td>
            <td th:text="${books.genre}"></td>
            <td><span style="background: #e9ecef; padding: 4px 8px; border-radius: 4px; font-size: 12px;"
                      th:text="${books.category.getName()}"></span></td>
            <td><a th:href="@{/books/delete(id=${books.id})}" onclick="return confirm('Are you sure?')">Delete</a></td>
        </tr>
        </tbody>
    </table>

    </body>
    </html>
</html>